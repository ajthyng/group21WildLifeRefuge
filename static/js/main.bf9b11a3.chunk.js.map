{"version":3,"sources":["utils/helpers.js","components/WelcomePage/LessonName.js","components/WelcomePage/Steps.js","components/WelcomePage/Header.js","components/WelcomePage/Title.js","components/WelcomePage/Summary.js","components/WelcomePage/VerticalLine.js","components/Styled/Button.js","components/WelcomePage/WelcomePage.js","components/UI/ModelAdd.js","components/UI/ModelMenu.js","utils/subject.js","js/three/OrbitControls.js","components/UI/UIBar.js","scenes/Ground.js","scenes/GrassField.js","scenes/AmbientLight.js","scenes/DirectionalLight.js","scenes/observer.js","scenes/Tree.js","scenes/Hare.js","scenes/Bush.js","scenes/Cube.js","scenes/SpotLight.js","scenes/ModelFactory.js","scenes/AddModels.js","scenes/Hawk.js","utils/CAPI/listeners.js","utils/CAPI/events.js","utils/CAPI/capi.js","js/three/FlyControls.js","scenes/PreLoadModels.js","components/PopUpInfo.js","scenes/SceneManager.js","scenes/ThreeEntry.js","scenes/RemoveModels.js","components/UI/AddMenu.js","components/SimViewer.js","components/StudentView.js","components/AuthorView.js","components/UI/Drawer.js","components/Styled/SelectDropdown.js","components/BalancePopulation/BalancePopulation.js","components/ViewControl.js","components/LoadingModels.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","random","min","max","Math","getValue","accessor","arguments","length","undefined","initial","Error","concat","split","reduce","accum","i","arr","val","Container","styled","div","_templateObject","Text","span","_templateObject2","LessonName","name","this","props","react_default","a","createElement","Component","Steps_templateObject","Step","Steps_templateObject2","Steps","steps","Steps_Container","map","step","key","defaultProps","Header_templateObject","Header","Header_Container","Title_templateObject","h1","Title_templateObject2","Title","title","Title_Container","Title_Text","Summary_templateObject","p","Summary_templateObject2","Summary","summary","Summary_Container","Summary_Text","Line","VerticalLine_templateObject","height","color","VerticalLine","_this$props","_this$props$height","_this$props$color","Button_templateObject","hoverColor","Label","Button_templateObject2","labelColor","labelHoverColor","Button","onClick","_this","label","Button_Container","WelcomePage_templateObject","Background","WelcomePage_templateObject2","WelcomePage","goToSim","history","push","handleLogin","Fragment","WelcomePage_Container","WelcomePage_Header","WelcomePage_Title","WelcomePage_VerticalLine","WelcomePage_LessonName","WelcomePage_Steps","Styled_Button","WelcomePage_Summary","React","ModelAdd","onClose","MenuItem_default","ModelMenu","anchor","open","children","core_Menu_default","id","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","Children","child","cloneElement","Object","objectSpread","_handlers","Subject","subscribe","_arguments","Array","prototype","slice","call","event","handler","unsubscribe","_arguments2","filter","func","next","_arguments3","value","forEach","freeze","__OrbitControls","UIBar","state","floraAnchor","faunaAnchor","handleMenu","currentTarget","setState","defineProperty","handleClose","toggleDrawer","position","classes","_this$state","floraOpen","Boolean","faunaOpen","className","root","AppBar_default","Toolbar_default","IconButton_default","menuButton","aria-label","Menu_default","Typography_default","variant","grow","Button_default","UI_ModelMenu","UI_ModelAdd","withStyles","zIndex","flexGrow","marginLeft","marginRight","object","domElement","document","enabled","target","THREE","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MIDDLE","target0","clone","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","PAN","TOUCH_ROTATE","TOUCH_DOLLY_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","handleMouseDownPan","clientX","clientY","preventDefault","button","ctrlKey","metaKey","handleMouseDownRotate","handleMouseDownDolly","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","create","constructor","defineProperties","center","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","require","TYPE","Ground","config","_config$size","size","_config$color","geometry","BoxBufferGeometry","material","MeshLambertMaterial","computeFaceNormals","normalsNeedUpdate","ground","Mesh","receiveShadow","castShadow","time","model","created","Date","_callee","loadingManager","loader","_config$count","count","grasses","originalGrass","bounds","grass","z","rotation","grassMesh","regenerator_default","wrap","_context","prev","LoadingManager","onLoad","GLTFLoader","Object3D","Promise","resolve","reject","load","scene","sent","getSceneManager","groundSize","userData","selectable","highlight","original","selected","abrupt","stop","GrassField","AmbientLight","ambientLight","light","DirectionalLight","directional","hawkObserver","EventObserver","classCallCheck","observers","fn","subscriber","data","getHawkObserver","NAME","Tree","treeGeometry","ConeGeometry","treeMaterial","MeshStandardMaterial","flatShading","treeTop1","treeTop","treeTrunkGeometry","CylinderGeometry","trunkMaterial","treeTrunk","tree","SceneManager","widthBound","heightBound","Hare","sphereGeometry","SphereGeometry","sphereMaterial","MeshPhongMaterial","hareMesh","Bush","CubeGeometry","MeshBasicMaterial","cube","_config$position","Cube","SpotLight","spotLight","shadow","camera","near","far","MODEL_TYPES","Hawk","_HawkModel","HawkModel","_HareModel","HareModel","_BushModel","BushModel","_TreeModel","TreeModel","_CubeModel","CubeModel","_GroundModel","GroundModel","Grass","_ref","asyncToGenerator","mark","_ref2","_x","apply","Ambient","_AmbientLight","Directional","_DirectionalLight","Spot","_SpotLight","ModelFactory","options","AddModels","String","addObject","makeSceneObject","TWEEN","hawk","tween1","Tween","to","tween2","start","tween3","chain","subjects","log","checkForHare","broadcast","addListenerFor","action","capiModel","on","Transporter","setBooleanIn","toggleContext","getConfig","context","CapiAdapter","CapiModel","CAPI","exposeKeys","expose","getTransporter","getCapiAdapter","getCapiModel","setValue","getValues","_ref3","_ref4","callback","baseModel","instance","__FlyControls","getCapiInstance","bind","setAttribute","movementSpeed","rollSpeed","dragToLook","autoForward","tmpQuaternion","mouseStatus","moveState","down","forward","back","pitchUp","pitchDown","yawLeft","yawRight","rollLeft","rollRight","moveVector","rotationVector","handleEvent","keydown","altKey","movementSpeedMultiplier","updateMovementVector","updateRotationVector","keyup","mousedown","focus","mousemove","container","getContainerDimensions","halfWidth","halfHeight","mouseup","delta","moveMult","rotMult","translateX","translateY","translateZ","normalize","multiply","setFromQuaternion","order","offsetWidth","offsetHeight","offsetLeft","offsetTop","innerWidth","innerHeight","PreLoadModels","hawks","hares","cedars","bushes","hare","bush","PopUpInfo","displayInfo","handleClick","info","Popover_default","getPopUpInfo","components_PopUpInfo","_modelMap","hawkType","hareType","bushType","canvas","renderer","cameraControls","loaded","raycaster","mouse","clock","screenDimensions","intersected","defaultCameraPosition","loadingScreen","checkIntersects","intersects","intersectObjects","resetIntersectedColor","handleModelCountChange","removeAllModelsByType","addObjects","vector","convertClickToVector","isSelectable","popUpInfo","toggleSelected","canvasTopOffset","getBoundingClientRect","width","unproject","onDocumentMouseClick","onDocumentMouseMove","setCanvas","initializeLoadingScreen","initializeScene","initializeRenderer","initializeCamera","createSceneSubjects","_this$screenDimension","aspectRatio","indicator","side","background","modelIndex","findIndex","selectedModel","modelToRemove","originalColor","hawkName","capi","currentHawkCount","splice","selectedColor","getDelta","elapsedTime","getElapsedTime","render","isSelected","colorKey","grassField","subject","_this2","sceneObject","idx","remove","lastCreated","b","valueOf","mostRecentModel","find","_this3","modelsToRemove","_capi$getValues","_capi$getValues2","slicedToArray","_this$canvas","setSize","aspect","_this$camera$position","_this$screenDimension2","toConsumableArray","OrbitControls","FlyControls","querySelector","_this$camera$position2","_this$screenDimension3","antialias","setPixelRatio","ThreeEntry","bindEventListeners","onresize","resizeCanvas","sceneManager","style","onWindowResize","requestAnimationFrame","containerElement","prepend","createCanvas","RemoveModels","model1","trim","AddMenu_templateObject","DivMargin","AddMenu_templateObject2","AddMenu","possibleConstructorReturn","getPrototypeOf","doingRemove","handleClickRemove","ev","AddMenu_Container","Fab_default","aria-owns","aria-haspopup","SimViewer","fab","Add_default","Delete_default","CanvasContainer","SimViewer_templateObject","canvasContainer","createRef","resetCamera","current","addInitialSetupCompleteListener","onTransporterReady","notifyOnReady","ref","UI_AddMenu","theme","margin","spacing","unit","StudentView_templateObject","StudentView","StudentView_Container","components_SimViewer","DrawerContentContainer","Drawer_templateObject","Drawer","setDrawer","Content","SwipeableDrawer_default","onOpen","Close_default","SelectDropdown_templateObject","SelectDropdown","onChange","e","placeholder","Select_default","alignSelf","inputProps","option","Paper","BalancePopulation_templateObject","BalancePopulation","_onSelect","placeHolderValue","simModel","BalancePopulation_Container","Styled_SelectDropdown","ViewControl_templateObject","ViewControl","setCameraPosition","setFlyControlCamera","setDefaultCamera","ViewControl_Container","LoadingModels_templateObject","App_templateObject","App","loggedIn","BrowserRouter","App_Container","Route","exact","path","component","react","UI_UIBar","components_StudentView","UI_Drawer","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.bf9b11a3.chunk.js","sourcesContent":["const random = (min, max) => {\n  return Math.random() * (max - min) + min;\n};\n\nconst getValue = (accessor = \"\", initial = {}) => {\n  if (initial === null) {\n    throw new Error(`Cannot access ${accessor} on null initial value`);\n  }\n  if (accessor === null) {\n    throw new Error(\"Cannot access null property of an object\");\n  }\n\n  return accessor.split(\".\").reduce((accum, accessor, i, arr) => {\n    const val = accum[accessor];\n    const valueIsLast = arr.length - 1 === i;\n\n    if (valueIsLast) {\n      return val;\n    }\n\n    return val || {};\n  }, initial);\n};\n\nmodule.exports = {\n  random,\n  getValue\n};\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Text = styled.span`\n  color: #FFFFFF;\n  font-size: 32px;\n`;\n\nclass LessonName extends Component {\n  render () {\n    const { name } = this.props;\n\n    return (\n      <Container>\n        <Text>{name}</Text>\n      </Container>\n    );\n  }\n}\n\nexport default LessonName;","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  position: absolute;\n  left: 15%;\n  top: 40%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n`;\n\nconst Step = styled.span`\n  color: #ffffff;\n  font-size: 14px;\n`;\n\nclass Steps extends Component {\n  render () {\n    const { steps } = this.props;\n\n    return (\n      <Container>\n        {steps.map((step, i) => (\n          <Step key={`${i}`}>{`${i + 1}.) ${step}`}</Step>\n        ))}\n      </Container>\n    );\n  }\n}\n\nSteps.defaultProps = {\n  steps: []\n};\n\nexport default Steps;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  position: absolute;\n  right: 0%;\n  top: 0%;\n  display: flex;\n  align-items: flex-start;\n  justify-content: center;\n`;\n\nclass Header extends Component {\n  render () {\n    const { name } = this.props;\n    return (\n      <Container>\n        <header>{`Welcome ${name}`}</header>\n      </Container>\n    );\n  }\n}\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Text = styled.h1`\n  color: #FFFFFF;\n  font-size: 36px;\n`;\n\nclass Title extends Component {\n  render () {\n    const { title } = this.props;\n\n    return (\n      <Container>\n        <Text>{title}</Text>\n      </Container>\n    );\n  }\n}\n\nexport default Title;","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    `;\n\nconst Text = styled.p`\n    color = #FFFFFF;\n    font-size: 14px;\n`;\n\nclass Summary extends Component {\n    render () {\n        const { summary } = this.props;\n\n        return (\n            <Container>\n                <Text>{summary}</Text>\n            </Container>\n        );\n    }\n}\n\nexport default Summary;","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Line = styled.div`\n  width: 1px;\n  height: ${props => `${props.height}px`};\n  background-color: ${props => props.color};\n`;\n\nclass VerticalLine extends Component {\n  render () {\n    const { height=50, color=\"white\" } = this.props;\n    return <Line height={height} color={color} />;\n  }\n}\n\nexport default VerticalLine;","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 12px 24px 14px 24px;\n  border-radius: 0.25em;\n  cursor: pointer;\n  user-select: none;\n\n  background-color: ${props => props.color};\n  transition: background-color 0.5s;\n\n  &:hover {\n    background-color: ${props => props.hoverColor};\n  }\n`;\n\nconst Label = styled.span`\n  color: ${props => props.labelColor};\n  transition: color 0.5s;\n  font-size: 19px;\n\n  ${Container}:hover & {\n    color: ${props => props.labelHoverColor};\n  }\n`;\n\nclass Button extends Component {\n  onClick = () => {\n    const { onClick } = this.props;\n\n    onClick && onClick();\n  }\n\n  render () {\n    const { label, color, hoverColor, labelColor, labelHoverColor } = this.props;\n    return (\n      <Container color={color} hoverColor={hoverColor} onClick={this.onClick}>\n        <Label labelColor={labelColor} labelHoverColor={labelHoverColor}>\n          {label}\n        </Label>\n      </Container>\n    );\n  }\n}\n\nButton.defaultProps = {\n  color: \"black\",\n  labelColor: \"white\",\n  hoverColor: \"white\",\n  labelHoverColor: \"black\"\n};\n\nexport default Button;\n","import React from \"react\";\nimport \"../../css/welcome.css\";\nimport LessonName from \"./LessonName\";\nimport Steps from \"./Steps\";\nimport Header from \"./Header\";\nimport styled from \"styled-components\";\nimport Title from \"./Title\";\nimport Summary from \"./Summary\";\nimport VerticalLine from \"./VerticalLine\";\nimport Button from \"../Styled/Button\";\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  flex-direction: column;\n  background-color: #000000aa;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst Background = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('assets/willapa-wildlife-refuge-hiking.jpg');\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n`;\n\nclass WelcomePage extends React.Component {\n  goToSim = () => {\n    const { history } = this.props;\n    history && history.push(\"/sim\");\n  }\n  render () {\n    const { handleLogin, name } = this.props;\n    return (\n      <React.Fragment>\n        <Background />\n        <Container>\n          <Header name={name} />\n          <Title title='Welcome to Willapa Wildlife Refuge' />\n          <VerticalLine height={80} color='white' />\n          <LessonName name='What do animals do in their free time?' />\n          <VerticalLine height={360} color='white' />\n          <Steps\n            steps={[\n              \"Add animals\",\n              \"Observe their interactions\",\n              \"Watch as hawks dominate the ecosystem\",\n              \"More steps to come\"\n            ]}\n          />\n          <Button\n            label='Start Lesson'\n            onClick={this.goToSim}\n            color='#4CAF50'\n            hoverColor='#FFFFFF'\n            labelColor='#FFFFFF'\n            labelHoverColor='#4CAF50'\n          />\n          <Summary summary='This is the summary paragraph from ReactJS' />\n        </Container>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default WelcomePage;\n","import React, { Component } from \"react\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nclass ModelAdd extends Component {\n  onClick = () => {\n    const { onClick, onClose } = this.props;\n\n    onClick && onClick();\n    onClose && onClose();\n  }\n\n  render () {\n    const { label } = this.props;\n    return <MenuItem onClick={this.onClick}>{label}</MenuItem>;\n  }\n}\n\nexport default ModelAdd;\n","import React, { Component } from \"react\";\nimport Menu from \"@material-ui/core/Menu\";\n\nclass ModelMenu extends Component {\n  render () {\n    const { anchor, open, onClose, children } = this.props;\n    return (\n      <Menu\n        id='menu-appbar'\n        anchorEl={anchor}\n        anchorOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\"\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"right\"\n        }}\n        open={open}\n        onClose={onClose}\n      >\n        {React.Children.map(children, child =>\n          React.cloneElement(child, { ...child.props, onClose })\n        )}\n      </Menu>\n    );\n  }\n}\n\nexport default ModelMenu;\n","const _handlers = {};\n\nconst Subject = {\n  subscribe () {\n    const [event, handler] = arguments;\n\n    if (!_handlers[event]) _handlers[event] = [];\n    _handlers[event].push(handler);\n  },\n  unsubscribe () {\n    const [event, handler] = arguments;\n\n    if (!_handlers[event]) return;\n    _handlers[event] = _handlers[event].filter(func => func !== handler);\n  },\n  next () {\n    const [event, value] = arguments;\n\n    if (!_handlers[event]) return;\n    _handlers[event].forEach(handler => {\n      if (typeof handler === \"function\") {\n        handler(value);\n      }\n    });\n  }\n};\n\nObject.freeze(Subject);\n\nexport default Subject;\n","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * From: https://github.com/gkjohnson/three.js/tree/examples-to-imports/examples/modules\n */\nimport * as THREE from \"three\";\n\nvar __OrbitControls;\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/metaKey, or arrow keys / touch: two-finger move\n\n__OrbitControls = function (object, domElement) {\n  this.object = object;\n\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = 0;\n  this.maxDistance = Infinity;\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = 0;\n  this.maxZoom = Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = 0; // radians\n  this.maxPolarAngle = Math.PI; // radians\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia)\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = false;\n  this.dampingFactor = 0.25;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming\n  this.enableZoom = true;\n  this.zoomSpeed = 1.0;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 1.0;\n\n  // Set to false to disable panning\n  this.enablePan = true;\n  this.panSpeed = 1.0;\n  this.screenSpacePanning = false; // if true, pan in screen-space\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n  // Mouse buttons\n  this.mouseButtons = {\n    LEFT: THREE.MOUSE.LEFT,\n    MIDDLE: THREE.MOUSE.MIDDLE,\n    RIGHT: THREE.MOUSE.RIGHT\n  };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function () {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function () {\n    return spherical.theta;\n  };\n\n  this.saveState = function () {\n    scope.target0.copy(scope.target);\n    scope.position0.copy(scope.object.position);\n    scope.zoom0 = scope.object.zoom;\n  };\n\n  this.reset = function () {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = (function () {\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(\n      object.up,\n      new THREE.Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    return function update () {\n      var position = scope.object.position;\n\n      offset.copy(position).sub(scope.target);\n\n      // rotate offset to \"y-axis-is-up\" space\n      offset.applyQuaternion(quat);\n\n      // angle from z-axis around y-axis\n      spherical.setFromVector3(offset);\n\n      if (scope.autoRotate && state === STATE.NONE) {\n        rotateLeft(getAutoRotationAngle());\n      }\n\n      spherical.theta += sphericalDelta.theta;\n      spherical.phi += sphericalDelta.phi;\n\n      // restrict theta to be between desired limits\n      spherical.theta = Math.max(\n        scope.minAzimuthAngle,\n        Math.min(scope.maxAzimuthAngle, spherical.theta)\n      );\n\n      // restrict phi to be between desired limits\n      spherical.phi = Math.max(\n        scope.minPolarAngle,\n        Math.min(scope.maxPolarAngle, spherical.phi)\n      );\n\n      spherical.makeSafe();\n\n      spherical.radius *= scale;\n\n      // restrict radius to be between desired limits\n      spherical.radius = Math.max(\n        scope.minDistance,\n        Math.min(scope.maxDistance, spherical.radius)\n      );\n\n      // move target to panned location\n      scope.target.add(panOffset);\n\n      offset.setFromSpherical(spherical);\n\n      // rotate offset back to \"camera-up-vector-is-up\" space\n      offset.applyQuaternion(quatInverse);\n\n      position.copy(scope.target).add(offset);\n\n      scope.object.lookAt(scope.target);\n\n      if (scope.enableDamping === true) {\n        sphericalDelta.theta *= 1 - scope.dampingFactor;\n        sphericalDelta.phi *= 1 - scope.dampingFactor;\n\n        panOffset.multiplyScalar(1 - scope.dampingFactor);\n      } else {\n        sphericalDelta.set(0, 0, 0);\n\n        panOffset.set(0, 0, 0);\n      }\n\n      scale = 1;\n\n      // update condition is:\n      // min(camera displacement, camera rotation in radians)^2 > EPS\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n      if (\n        zoomChanged ||\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\n        8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n      ) {\n        scope.dispatchEvent(changeEvent);\n\n        lastPosition.copy(scope.object.position);\n        lastQuaternion.copy(scope.object.quaternion);\n        zoomChanged = false;\n\n        return true;\n      }\n\n      return false;\n    };\n  })();\n\n  this.dispose = function () {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    window.removeEventListener(\"keydown\", onKeyDown, false);\n\n    // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY_PAN: 4\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle () {\n    return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale () {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft (angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp (angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function () {\n    var v = new THREE.Vector3();\n\n    return function panLeft (distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function () {\n    var v = new THREE.Vector3();\n\n    return function panUp (distance, objectMatrix) {\n      if (scope.screenSpacePanning === true) {\n        v.setFromMatrixColumn(objectMatrix, 1);\n      } else {\n        v.setFromMatrixColumn(objectMatrix, 0);\n        v.crossVectors(scope.object.up, v);\n      }\n\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function () {\n    var offset = new THREE.Vector3();\n\n    return function pan (deltaX, deltaY) {\n      var element =\n        scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n      if (scope.object.isPerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0);\n\n        // we use only clientHeight here so aspect ratio does not distort speed\n        panLeft(\n          (2 * deltaX * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n        panUp(\n          (2 * deltaY * targetDistance) / element.clientHeight,\n          scope.object.matrix\n        );\n      } else if (scope.object.isOrthographicCamera) {\n        // orthographic\n        panLeft(\n          (deltaX * (scope.object.right - scope.object.left)) /\n            scope.object.zoom /\n            element.clientWidth,\n          scope.object.matrix\n        );\n        panUp(\n          (deltaY * (scope.object.top - scope.object.bottom)) /\n            scope.object.zoom /\n            element.clientHeight,\n          scope.object.matrix\n        );\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n        );\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn (dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut (dollyScale) {\n    if (scope.object.isPerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object.isOrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate (event) {\n    // console.log( 'handleMouseDownRotate' );\n\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly (event) {\n    // console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan (event) {\n    // console.log( 'handleMouseDownPan' );\n\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate (event) {\n    // console.log( 'handleMouseMoveRotate' );\n\n    rotateEnd.set(event.clientX, event.clientY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMoveDolly (event) {\n    // console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    scope.update();\n  }\n\n  function handleMouseMovePan (event) {\n    // console.log( 'handleMouseMovePan' );\n\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    scope.update();\n  }\n\n  function handleMouseUp (event) {\n    // console.log( 'handleMouseUp' );\n  }\n\n  function handleMouseWheel (event) {\n    // console.log( 'handleMouseWheel' );\n\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    scope.update();\n  }\n\n  function handleKeyDown (event) {\n    // console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        scope.update();\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleTouchStartRotate (event) {\n    // console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDollyPan (event) {\n    // console.log( 'handleTouchStartDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyStart.set(0, distance);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panStart.set(x, y);\n    }\n  }\n\n  function handleTouchMoveRotate (event) {\n    // console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    rotateDelta\n      .subVectors(rotateEnd, rotateStart)\n      .multiplyScalar(scope.rotateSpeed);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    rotateLeft((2 * Math.PI * rotateDelta.x) / element.clientHeight); // yes, height\n\n    rotateUp((2 * Math.PI * rotateDelta.y) / element.clientHeight);\n\n    rotateStart.copy(rotateEnd);\n\n    scope.update();\n  }\n\n  function handleTouchMoveDollyPan (event) {\n    // console.log( 'handleTouchMoveDollyPan' );\n\n    if (scope.enableZoom) {\n      var dx = event.touches[0].pageX - event.touches[1].pageX;\n      var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n      var distance = Math.sqrt(dx * dx + dy * dy);\n\n      dollyEnd.set(0, distance);\n\n      dollyDelta.set(0, Math.pow(dollyEnd.y / dollyStart.y, scope.zoomSpeed));\n\n      dollyIn(dollyDelta.y);\n\n      dollyStart.copy(dollyEnd);\n    }\n\n    if (scope.enablePan) {\n      var x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\n      var y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\n\n      panEnd.set(x, y);\n\n      panDelta.subVectors(panEnd, panStart).multiplyScalar(scope.panSpeed);\n\n      pan(panDelta.x, panDelta.y);\n\n      panStart.copy(panEnd);\n    }\n\n    scope.update();\n  }\n\n  function handleTouchEnd (event) {\n    // console.log( 'handleTouchEnd' );\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.button) {\n      case scope.mouseButtons.LEFT:\n        if (event.ctrlKey || event.metaKey) {\n          if (scope.enablePan === false) return;\n\n          handleMouseDownPan(event);\n\n          state = STATE.PAN;\n        } else {\n          if (scope.enableRotate === false) return;\n\n          handleMouseDownRotate(event);\n\n          state = STATE.ROTATE;\n        }\n\n        break;\n\n      case scope.mouseButtons.MIDDLE:\n        if (scope.enableZoom === false) return;\n\n        handleMouseDownDolly(event);\n\n        state = STATE.DOLLY;\n\n        break;\n\n      case scope.mouseButtons.RIGHT:\n        if (scope.enablePan === false) return;\n\n        handleMouseDownPan(event);\n\n        state = STATE.PAN;\n\n        break;\n      default:\n        break;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (state) {\n      case STATE.ROTATE:\n        if (scope.enableRotate === false) return;\n\n        handleMouseMoveRotate(event);\n\n        break;\n\n      case STATE.DOLLY:\n        if (scope.enableZoom === false) return;\n\n        handleMouseMoveDolly(event);\n\n        break;\n\n      case STATE.PAN:\n        if (scope.enablePan === false) return;\n\n        handleMouseMovePan(event);\n\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function onMouseUp (event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel (event) {\n    if (\n      scope.enabled === false ||\n      scope.enableZoom === false ||\n      (state !== STATE.NONE && state !== STATE.ROTATE)\n    ) {\n      return;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    scope.dispatchEvent(startEvent);\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown (event) {\n    if (\n      scope.enabled === false ||\n      scope.enableKeys === false ||\n      scope.enablePan === false\n    ) {\n      return;\n    }\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n\n        handleTouchStartRotate(event);\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n\n        handleTouchStartDollyPan(event);\n\n        state = STATE.TOUCH_DOLLY_PAN;\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?\n\n        handleTouchMoveRotate(event);\n\n        break;\n\n      case 2: // two-fingered touch: dolly-pan\n        if (scope.enableZoom === false && scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_DOLLY_PAN) return; // is this needed?\n\n        handleTouchMoveDollyPan(event);\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd (event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu (event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n  }\n\n  //\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  window.addEventListener(\"keydown\", onKeyDown, false);\n\n  // force an update at start\n\n  this.update();\n};\n\n__OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\n__OrbitControls.prototype.constructor = __OrbitControls;\n\nObject.defineProperties(__OrbitControls.prototype, {\n  center: {\n    get: function () {\n      console.warn(\"__OrbitControls: .center has been renamed to .target\");\n      return this.target;\n    }\n  },\n\n  // backward compatibility\n\n  noZoom: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      return !this.enableZoom;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      this.enableZoom = !value;\n    }\n  },\n\n  noRotate: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      return !this.enableRotate;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      this.enableRotate = !value;\n    }\n  },\n\n  noPan: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      return !this.enablePan;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      this.enablePan = !value;\n    }\n  },\n\n  noKeys: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      return !this.enableKeys;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      this.enableKeys = !value;\n    }\n  },\n\n  staticMoving: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      return !this.enableDamping;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      this.enableDamping = !value;\n    }\n  },\n\n  dynamicDampingFactor: {\n    get: function () {\n      console.warn(\n        \"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      return this.dampingFactor;\n    },\n\n    set: function (value) {\n      console.warn(\n        \"__OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      this.dampingFactor = value;\n    }\n  }\n});\n\nexport { __OrbitControls as OrbitControls };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ModelAdd from \"./ModelAdd\";\nimport ModelMenu from \"./ModelMenu\";\nimport Subject from \"../../utils/subject\";\n\nconst styles = {\n  root: {\n    zIndex: 10\n  },\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  }\n};\n\nclass UIBar extends Component {\n  state = {\n    floraAnchor: null,\n    faunaAnchor: null\n  }\n\n  handleMenu = anchor => event => {\n    if (event.currentTarget !== this.state[anchor]) {\n      this.setState({ [anchor]: event.currentTarget });\n    }\n  }\n\n  handleClose = anchor => () => {\n    if (this.state[anchor]) {\n      this.setState({ [anchor]: null });\n    }\n  }\n\n  toggleDrawer = position => () => {\n    Subject.next(`toggle ${position}`);\n  }\n\n  render () {\n    const { classes } = this.props;\n    const { floraAnchor, faunaAnchor } = this.state;\n    const floraOpen = Boolean(floraAnchor);\n    const faunaOpen = Boolean(faunaAnchor);\n\n    return (\n      <div className={classes.root}>\n        <AppBar position='static'>\n          <Toolbar>\n            <IconButton\n              className={classes.menuButton}\n              onClick={this.toggleDrawer(\"left\")}\n              color='inherit'\n              aria-label='Menu'\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography variant='h6' color='inherit' className={classes.grow}>\n              Willapa Refuge\n            </Typography>{\" \"}\n            <Button onClick={this.handleMenu(\"floraAnchor\")} color='inherit'>\n              Flora\n            </Button>\n            <Button onClick={this.handleMenu(\"faunaAnchor\")} color='inherit'>\n              Fauna\n            </Button>\n            <ModelMenu\n              id='menu-fauna'\n              anchor={faunaAnchor}\n              open={faunaOpen}\n              onClose={this.handleClose(\"faunaAnchor\")}\n            >\n              <ModelAdd label='Redtail Hawk' />\n              <ModelAdd label='Snowshoe Hare' />\n            </ModelMenu>\n            <ModelMenu\n              id='menu-flora'\n              anchor={floraAnchor}\n              open={floraOpen}\n              onClose={this.handleClose(\"floraAnchor\")}\n            >\n              <ModelAdd label='Big Sagebush' />\n              <ModelAdd label='Western Cedar' />\n            </ModelMenu>\n          </Toolbar>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nUIBar.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(UIBar);\n","const THREE = require(\"three\");\n\nexport const TYPE = \"Ground\";\n\nfunction Ground (config) {\n  const { size = { x: 100, y: 100 }, color = \"#996600\" } = config;\n  const depth = 15;\n  const geometry = new THREE.BoxBufferGeometry(size.x, depth, size.y);\n  const material = new THREE.MeshLambertMaterial({\n    color\n  });\n\n  geometry.computeFaceNormals();\n  geometry.normalsNeedUpdate = true;\n\n  const ground = new THREE.Mesh(geometry, material);\n  ground.position.set(0, -depth / 2, 0);\n  ground.receiveShadow = true;\n\n  ground.castShadow = true;\n\n  ground.type = TYPE;\n\n  function update (time) {}\n\n  return {\n    update,\n    model: ground,\n    created: new Date()\n  };\n}\n\nexport default Ground;\n","import { random } from \"../utils/helpers\";\nimport { getSceneManager } from \"./SceneManager\";\n\nconst THREE = (window.THREE = require(\"three\"));\nrequire(\"three/examples/js/loaders/GLTFLoader\");\n\nexport const TYPE = \"Grass\";\n\nasync function GrassField (config) {\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.onLoad = config.onLoad || (() => null);\n\n  const loader = new THREE.GLTFLoader(loadingManager);\n\n  const { count = 500 } = config;\n\n  const grasses = new THREE.Object3D();\n  const originalGrass = await new Promise((resolve, reject) => {\n    loader.load(\n      \"models/grass.gltf\",\n      grass => resolve(grass.scene || null),\n      undefined,\n      reject\n    );\n  });\n\n  const bounds = getSceneManager().groundSize;\n  bounds.x *= 0.95;\n  bounds.y *= 0.95;\n  for (let i = 0; i < count; i++) {\n    const grass = originalGrass.clone();\n    grass.children[0].children[0].userData = {\n      selectable: true,\n      color: {\n        highlight: \"#FFF\",\n        original: \"#3baa5d\",\n        selected: \"#FF00FF\"\n      }\n    };\n    const size = random(1, 2);\n\n    const x = random(-bounds.x / 2, bounds.x / 2);\n    const z = random(-bounds.y / 2, bounds.y / 2);\n\n    const rotation = random(-Math.PI / 2, Math.PI / 2);\n\n    grass.scale.set(size, size, size);\n    grass.position.set(x, 0, z);\n    grass.rotation.y = rotation;\n    const grassMesh = grass.children[0].children[0].material;\n    grassMesh.color.set(grass.children[0].children[0].userData.color.original);\n    grass.children[0].children[0].material = grassMesh.clone();\n    grasses.add(grass);\n  }\n\n  grasses.type = TYPE;\n\n  function update () {}\n\n  return {\n    update,\n    model: grasses,\n    created: new Date()\n  };\n}\n\nexport default GrassField;\n","const THREE = require(\"three\");\n\nfunction AmbientLight (config = {}) {\n  const ambientLight = new THREE.AmbientLight(0x808080);\n  ambientLight.castShadow = true;\n\n  function update () {}\n\n  return {\n    update,\n    light: ambientLight\n  };\n}\n\nexport default AmbientLight;\n","const THREE = require(\"three\");\n\nfunction DirectionalLight (config = {}) {\n  const directional = new THREE.DirectionalLight(0xffffff, 0.5);\n  directional.position.set(1, 1, 1);\n  function update () {}\n\n  return {\n    update,\n    light: directional\n  };\n}\n\nexport default DirectionalLight;\n","\nclass EventObserver {\n  constructor() {\n    this.observers = [];\n  }\n\n  subscribe(fn) {\n    this.observers.push(fn);\n  }\n\n  unsubscribe(fn) {\n    this.observers = this.observers.filter((subscriber) => subscriber !== fn);\n  }\n\n  broadcast(data) {\n    this.observers.forEach((subscriber) => subscriber(data));\n  }\n}\n\nconst hawkObserver = new EventObserver();\n//export default hawkObserver;\nexport const getHawkObserver = () => {\n    return hawkObserver;\n  };\n  \n","/*\n  Reference:\n  1. For create tree: URL: https://gamedevelopment.tutsplus.com/tutorials/creating-a-simple-3d-endless-runner-game-using-three-js--cms-29157\n\n */\n\nimport { random } from \"../utils/helpers\";\nimport { getSceneManager } from \"./SceneManager\";\nconst THREE = require(\"three\");\n\nexport const NAME = \"tree\";\nexport const TYPE = \"Tree\";\n\nfunction Tree () {\n  var sides = 8;\n  var tiers = 6;\n  var treeGeometry = new THREE.ConeGeometry(10, 10, sides, tiers);\n  var treeMaterial = new THREE.MeshStandardMaterial({\n    color: 0x33ff33,\n    flatShading: true\n  });\n\n  var treeTop1 = new THREE.Mesh(treeGeometry, treeMaterial);\n  treeTop1.castShadow = true;\n  treeTop1.receiveShadow = false;\n  treeTop1.position.y = 50;\n  treeTop1.rotation.y = Math.random() * Math.PI;\n\n  var treeTop = new THREE.Mesh(treeGeometry, treeMaterial);\n  treeTop.castShadow = true;\n  treeTop.receiveShadow = false;\n  treeTop.position.y = 45;\n  treeTop.rotation.y = Math.random() * Math.PI;\n  var treeTrunkGeometry = new THREE.CylinderGeometry(0.1, 2, 100);\n  var trunkMaterial = new THREE.MeshStandardMaterial({\n    color: 0x886633,\n    flatShading: true\n  });\n  var treeTrunk = new THREE.Mesh(treeTrunkGeometry, trunkMaterial);\n\n  treeTrunk.position.y = 0.25;\n  var tree = new THREE.Object3D();\n  tree.castShadow = true;\n\n  tree.add(treeTrunk);\n  tree.add(treeTop1);\n  tree.add(treeTop);\n\n  const SceneManager = getSceneManager();\n  const widthBound = (0.95 * SceneManager.groundSize.x) / 2;\n  const heightBound = (0.95 * SceneManager.groundSize.y) / 2;\n\n  const x = random(-widthBound, widthBound);\n  const y = 1.5;\n  const z = random(-heightBound, heightBound);\n  const position = { x, y, z };\n\n  tree.position.set(position.x, position.y, position.z);\n  tree.userData = {\n    selectable: true,\n    color: {\n      highlight: \"#f7ff6d\",\n      selected: \"#808080\"\n    },\n    name: NAME\n  };\n  tree.name = NAME;\n\n  tree.type = \"Tree\";\n\n  return {\n    model: tree,\n    created: new Date()\n  };\n}\n\nexport default Tree;\n","import { random } from \"../utils/helpers\";\nimport { getSceneManager } from \"./SceneManager\";\nimport { getHawkObserver } from \"./observer.js\";\nconst THREE = require(\"three\");\n\nexport const NAME = \"hare\";\nexport const TYPE = \"Hare\";\n\nfunction Hare () {\n  const size = 3;\n  const color = \"#db7093\";\n\n  // create a sphere\n  var sphereGeometry = new THREE.SphereGeometry(6, 30, 30);\n  var sphereMaterial = new THREE.MeshPhongMaterial({ color: color });\n  var hareMesh = new THREE.Mesh(sphereGeometry, sphereMaterial);\n  hareMesh.name = \"hare\";\n\n  const SceneManager = getSceneManager();\n  const widthBound = (0.95 * SceneManager.groundSize.x) / 2;\n  const heightBound = (0.95 * SceneManager.groundSize.y) / 2;\n\n  const x = random(-widthBound, widthBound);\n  const y = 2;\n  const z = random(-heightBound, heightBound);\n  const position = { x, y, z };\n\n  hareMesh.position.set(position.x, position.y, position.z);\n  hareMesh.castShadow = true;\n  hareMesh.userData = {\n    selectable: true,\n    color: {\n      original: color,\n      highlight: \"#f7ff6d\",\n      selected: \"#808080\"\n    },\n    name: NAME\n  };\n\n  getHawkObserver().subscribe(position => {\n    // console.log(\"hawkObserver method called for hare: \");\n    // checkForHare(position);\n  });\n\n  //scene.add(hareMesh);\n  hareMesh.type = TYPE;\n  function update () {\n    // console.log(\"hare update\");\n  }\n\n  return {\n    update,\n    model: hareMesh,\n    created: new Date()\n  };\n}\n\nexport default Hare;\n","import { random } from \"../utils/helpers\";\nimport { getSceneManager } from \"./SceneManager\";\nconst THREE = require(\"three\");\n\nexport const NAME = \"bush\";\nexport const TYPE = \"Bush\";\n\nfunction Bush () {\n  const size = 5;\n  const color = \"#2cdb26\";\n\n  const geometry = new THREE.CubeGeometry(size * 3, size, size);\n  const material = new THREE.MeshBasicMaterial({ color });\n  const cube = new THREE.Mesh(geometry, material);\n\n  const SceneManager = getSceneManager();\n  const widthBound = (0.95 * SceneManager.groundSize.x) / 2;\n  const heightBound = (0.95 * SceneManager.groundSize.y) / 2;\n\n  const x = random(-widthBound, widthBound);\n  const y = 1.5;\n  const z = random(-heightBound, heightBound);\n  const position = { x, y, z };\n\n  cube.position.set(position.x, position.y, position.z);\n  cube.userData = {\n    selectable: true,\n    color: {\n      original: color,\n      highlight: \"#f7ff6d\",\n      selected: \"#808080\"\n    },\n    name: NAME\n  };\n\n  cube.type = TYPE;\n  cube.name = NAME;\n\n  function update () {}\n\n  return {\n    update,\n    model: cube,\n    created: new Date()\n  };\n}\n\nexport default Bush;\n","const THREE = require(\"three\");\n\nexport const NAME = \"grass\";\nexport const TYPE = \"Grass\";\nasync function Cube (config) {\n  const {\n    color = \"#0080FF\",\n    size = 3,\n    position = { x: 0, y: 0, z: 0 }\n  } = config;\n\n  const geometry = new THREE.CubeGeometry(size, size * 3, size);\n  const material = new THREE.MeshBasicMaterial({ color });\n  const cube = new THREE.Mesh(geometry, material);\n  cube.position.set(position.x, position.y, position.z);\n  cube.userData = {\n    selectable: true,\n    color: {\n      original: color,\n      highlight: \"#f7ff6d\",\n      selected: \"#000\"\n    },\n    name: NAME\n  };\n  cube.name = NAME;\n  cube.type = TYPE;\n\n  function update () {}\n\n  return {\n    update,\n    model: cube,\n    created: new Date()\n  };\n}\n\nexport default Cube;\n","const THREE = require(\"three\");\n\nfunction SpotLight (config = {}) {\n  const spotLight = new THREE.SpotLight(0xffffff);\n  spotLight.position.set(500, 150, 500);\n  spotLight.shadow.camera.near = 20;\n  spotLight.shadow.camera.far = 50;\n  spotLight.castShadow = true;\n\n  function update () {}\n\n  return {\n    update,\n    light: spotLight\n  };\n}\n\nexport default SpotLight;\n","import TreeModel from \"./Tree\";\nimport HawkModel from \"./Hawk\";\nimport HareModel from \"./Hare\";\nimport BushModel from \"./Bush\";\nimport CubeModel from \"./Cube\";\nimport GroundModel from \"./Ground\";\nimport GrassField from \"./GrassField\";\nimport AmbientLight from \"./AmbientLight\";\nimport DirectionalLight from \"./DirectionalLight\";\nimport SpotLight from \"./SpotLight\";\n\nconst Hawk = () => {\n  const { model, created, update } = HawkModel();\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Hare = () => {\n  const { model, created, update } = HareModel();\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Bush = () => {\n  const { model, created, update } = BushModel();\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Tree = () => {\n  const { model, created } = TreeModel();\n  return {\n    update: () => {},\n    model,\n    created\n  };\n};\nconst Cube = config => {\n  const { model, created, update } = CubeModel(config);\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Ground = config => {\n  const { model, created, update } = GroundModel(config);\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Grass = async config => {\n  const { model, created, update } = await GrassField(config);\n  return {\n    model,\n    created,\n    update\n  };\n};\nconst Ambient = () => {\n  const { light, created, update } = AmbientLight();\n  return {\n    model: light,\n    created: new Date(),\n    update\n  };\n};\nconst Directional = () => {\n  const { light, created, update } = DirectionalLight();\n  return {\n    model: light,\n    created: new Date(),\n    update\n  };\n};\nconst Spot = () => {\n  const { light, created, update } = SpotLight();\n  return {\n    model: light,\n    created: new Date(),\n    update\n  };\n};\n\nconst MODEL_TYPES = {\n  Hawk: {\n    type: \"hawk\",\n    model: Hawk\n  },\n  Hare: {\n    type: \"hare\",\n    model: Hare\n  },\n  Bush: {\n    type: \"bush\",\n    model: Bush\n  },\n  Tree: {\n    type: \"tree\",\n    model: Tree\n  },\n  Cube: {\n    type: \"cube\",\n    model: Cube\n  },\n  Ground: {\n    type: \"ground\",\n    model: Ground\n  },\n  Grass: {\n    type: \"grassField\",\n    model: Grass\n  },\n  Ambient: {\n    type: \"ambientLight\",\n    model: Ambient\n  },\n  Directional: {\n    type: \"directionalLight\",\n    model: Directional\n  },\n  Spot: {\n    type: \"spotLight\",\n    model: Spot\n  }\n};\n\nclass modelFactory {\n  makeSceneObject (options) {\n    const { type, config } = options;\n    switch (type) {\n      case MODEL_TYPES.Hawk.type:\n        return MODEL_TYPES.Hawk.model();\n      case MODEL_TYPES.Hare.type:\n        return MODEL_TYPES.Hare.model();\n      case MODEL_TYPES.Bush.type:\n        return MODEL_TYPES.Bush.model();\n      case MODEL_TYPES.Tree.type:\n        return MODEL_TYPES.Tree.model();\n      case MODEL_TYPES.Grass.type:\n        return MODEL_TYPES.Grass.model(config);\n      case MODEL_TYPES.Ground.type:\n        return MODEL_TYPES.Ground.model(config);\n      case MODEL_TYPES.Ambient.type:\n        return MODEL_TYPES.Ambient.model();\n      case MODEL_TYPES.Spot.type:\n        return MODEL_TYPES.Spot.model();\n      case MODEL_TYPES.Directional.type:\n        return MODEL_TYPES.Directional.model();\n      default:\n        return MODEL_TYPES.Cube.model(config);\n    }\n  }\n}\n\nexport default new modelFactory();\n","import { getSceneManager } from \"./SceneManager\";\nimport { random } from \"../utils/helpers\";\nimport ModelFactory from \"./ModelFactory\";\n\nfunction AddModels (model) {\n  let color = null;\n  const SceneManager = getSceneManager();\n\n  switch (String(model)) {\n    case \"tree\":\n      color = \"#00C060\";\n      SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"tree\" }));\n      return;\n    case \"hawk\":\n      color = 0xcc0000;\n      SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"hawk\" }));\n      return;\n    case \"bush\":\n      SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"bush\" }));\n      color = 0x669900;\n      return;\n    case \"hare\":\n      SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"hare\" }));\n      color = 0xd9d9d9;\n      return;\n    default:\n      // grass isn't handled\n      //      console.log(\"AddModels:  Unknown model: \" + (String)(model1));\n      break;\n  }\n\n  function update () {}\n\n  return {\n    update\n  };\n}\n\nexport default AddModels;\n","import { random } from \"../utils/helpers\";\nimport { getSceneManager } from \"./SceneManager\";\nimport { getHawkObserver } from \"./observer.js\";\nimport ModelFactory from \"./ModelFactory\";\nimport AddModels from \"./AddModels\";\nconst THREE = require(\"three\");\n\nexport const NAME = \"redtailHawk\";\nexport const TYPE = \"Hawk\";\n\nvar TWEEN = require(\"@tweenjs/tween.js\");\n\nfunction Hawk () {\n  let collide = true;\n  const size = 3;\n  const color = \"#db7093\";\n\n  const geometry = new THREE.CubeGeometry(size, size * 5, size);\n  const material = new THREE.MeshBasicMaterial({ color });\n  const cube = new THREE.Mesh(geometry, material);\n // cube.position.y = 5;\n\n  // create a sphere\n  var sphereGeometry = new THREE.SphereGeometry(6, 30, 30);\n  var sphereMaterial = new THREE.MeshPhongMaterial({ color: color });\n  var hareMesh = new THREE.Mesh(sphereGeometry, sphereMaterial);\n // hareMesh.position.y = 0;\n\n  hareMesh.name = \"hare\";\n\n  const SceneManager = getSceneManager();\n  const widthBound = (0.95 * SceneManager.groundSize.x) / 2;\n  const heightBound = (0.95 * SceneManager.groundSize.y) / 2;\n\n  const x = random(-widthBound, widthBound);\n  const y = 100;\n  const z = random(-heightBound, heightBound);\n  const position = { x, y, z };\n\n  let hawk = new THREE.Object3D();\n  hawk.position.set(position.x, position.y, position.z);\n  hareMesh.position.y = hawk.position.y - 4;\n  cube.position.y = hawk.position.y;\n  hawk.add(cube);\n  hawk.add(hareMesh);\n  hawk.userData = {\n    selectable: true,\n    color: {\n      original: color,\n      highlight: \"#f7ff6d\",\n      selected: \"#808080\"\n    },\n    name: NAME\n  };\n\n  hawk.name = NAME;\n  hawk.type = TYPE;\n\n  const tween1 = new TWEEN.Tween(hawk.position).to(\n    { x: 500, y: 150, z: -100 },\n    10000/3\n  );\n\n  const tween2 = new TWEEN.Tween(hawk.position)\n    .to({ x: -500, y: 100, z: 100 }, 10000/3)\n    .start();\n\n  var tween3 = {};\n\n  // hawk must track it's position and look for hares nearby as it flys\n  getHawkObserver().subscribe(position => {\n    // console.log(\"hawkObserver method called for Hawk: \");\n    //checkForHare(position);\n  });\n\n  function checkForHare () {\n    for (let i = 4; i < getSceneManager().subjects.length; i++) {\n      // console.log(\"Hawk:checkForHare:  length : \" + getSceneManager().subjects.length );\n      if (getSceneManager().subjects.length > 4) {\n        if (getSceneManager().subjects[i].model.name == \"hare\") {\n          // console.log(\" Found a hare: \" + position.x + \":\" + position.y + \":\" + position.z);\n          // JWC  tween3 = new TWEEN.Tween(cube.position)\n          tween3 = new TWEEN.Tween(hawk.position).to(\n            {\n              x: getSceneManager().subjects[i].model.position.x,\n              y: getSceneManager().subjects[i].model.position.y,\n              z: getSceneManager().subjects[i].model.position.z\n            },\n            10000/4\n          );\n          tween2.chain(tween3);\n          tween3.chain(tween1);\n          console.log(\"Colliding \" + hareMesh.position.y);\n          hareMesh.position.y = hawk.position.y - 4;\n          cube.position.y = hawk.position.y;\n         // let aHare = SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"hare\" }));\n\n          if(collide){\n          //  hawk.add(hareMesh);\n            //console.log(\"Colliding \" + hawk.position.y);\n\n            //collide = false;\n          }\n\n        }\n      }\n    }\n  }\n  tween1.chain(tween2);\n  tween2.chain(tween1);\n\n  function update () {\n    // console.log(\"hawk updated\");\n    // get the position and then it should call the observers\n    checkForHare();\n    getHawkObserver().broadcast(cube.position);\n    TWEEN.update();\n   // hareMesh.position.y = hawk.position.y - 4;\n\n  }\n\n  return {\n    update,\n    model: hawk,\n    created: new Date()\n  };\n}\n\nexport default Hawk;\n","export const addListenerFor = ({ key, action, capiModel }) => {\n  capiModel.on(`change:${key}`, action);\n};\n","import { getValue } from \"../helpers\";\nimport { addListenerFor } from \"./listeners\";\n\nconst Transporter = getValue(\"simcapi.Transporter\", window);\n\nconst VIEWER = \"VIEWER\";\nconst AUTHOR = \"AUTHOR\";\n\nconst setBooleanIn = capiModel => ({ key, to: value }) => {\n  capiModel.set(key, value);\n};\n\nconst toggleContext = capiModel => () => {\n  console.log(Transporter);\n  if (Transporter) {\n    capiModel.set(\"simContext\", Transporter.getConfig().context);\n  }\n\n  console.log(\"Toggle Context\");\n\n  switch (capiModel.get(\"simContext\")) {\n    case VIEWER:\n      setBooleanIn(capiModel)({ to: true, key: \"studentMode\" });\n      setBooleanIn(capiModel)({ to: false, key: \"authorMode\" });\n      setBooleanIn(capiModel)({ to: false, key: \"reviewMode\" });\n      break;\n    case AUTHOR:\n      setBooleanIn(capiModel)({ to: true, key: \"authorMode\" });\n      setBooleanIn(capiModel)({ to: false, key: \"studentMode\" });\n      setBooleanIn(capiModel)({ to: false, key: \"reviewMode\" });\n      break;\n    default:\n      console.log(\"Unsupported context received\");\n  }\n};\n\nexport const bindEvents = capiModel => {\n  addListenerFor({\n    key: \"toggleContext\",\n    action: toggleContext(capiModel),\n    capiModel\n  });\n};\n","import { getValue } from \"../helpers\";\nimport { bindEvents } from \"./events\";\nimport { getSceneManager } from \"../../scenes/SceneManager\";\nimport { addListenerFor } from \"../CAPI/listeners\";\n\nconst CapiAdapter = getValue(\"simcapi.CapiAdapter\", window);\nconst CapiModel = CapiAdapter && CapiAdapter.CapiModel;\nconst Transporter = getValue(\"simcapi.Transporter\", window);\n\nclass CAPI {\n  constructor () {\n    const baseModel = require(\"../../model/capiModel\");\n    this.capiModel = new CapiModel(baseModel);\n    this.exposeKeys(Object.keys(baseModel));\n    bindEvents(this.capiModel);\n  }\n\n  exposeKeys = keys => {\n    keys.forEach(key => {\n      if (key === \"simObjects\") return;\n      CapiAdapter.expose(key, this.capiModel);\n    });\n  }\n\n  getTransporter = () => {\n    return Transporter;\n  }\n\n  getCapiAdapter = () => {\n    return CapiAdapter;\n  }\n\n  getCapiModel = () => {\n    return this.capiModel;\n  }\n\n  getValue = ({ key }) => {\n    return this.capiModel.get(key);\n  }\n\n  setValue = ({ key, value }) => {\n    return this.capiModel.set(key, value);\n  }\n\n  getValues = ({ keys }) => {\n    return keys.reduce((accum, key) => {\n      accum.push(this.capiModel.get(key));\n      return accum;\n    }, []);\n  }\n\n  addListenerFor = ({ key, callback }) => {\n    addListenerFor({ key, action: callback, capiModel: this.capiModel });\n  }\n}\n\nCAPI.instance = null;\n\nexport const getCapiInstance = () => {\n  if (!CAPI.instance) {\n    CAPI.instance = new CAPI();\n  }\n  return CAPI.instance;\n};\n","/**\n * @author James Baicoianu / http://www.baicoianu.com/\n */\n\nimport * as THREE from \"three\";\n\nvar __FlyControls;\n\n__FlyControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\tif ( domElement ) this.domElement.setAttribute( \"tabindex\", -1 );\n\n\t// API\n\n\tthis.movementSpeed = 1.0;\n\tthis.rollSpeed = 0.005;\n\n\tthis.dragToLook = false;\n\tthis.autoForward = false;\n\n\t// disable default target object behavior\n\n\t// internals\n\n\tthis.tmpQuaternion = new THREE.Quaternion();\n\n\tthis.mouseStatus = 0;\n\n\tthis.moveState = { up: 0, down: 0, left: 0, right: 0, forward: 0, back: 0, pitchUp: 0, \n\t\tpitchDown: 0, yawLeft: 0, yawRight: 0, rollLeft: 0, rollRight: 0 };\n\tthis.moveVector = new THREE.Vector3( 0, 0, 0 );\n\tthis.rotationVector = new THREE.Vector3( 0, 0, 0 );\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == \"function\" ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tthis.keydown = function( event ) {\n\n\t\tif ( event.altKey ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = .1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 1; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 1; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 1; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 1; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 1; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 1; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 1; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 1; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 1; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 1; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 1; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 1; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.keyup = function( event ) {\n\n\t\tswitch( event.keyCode ) {\n\n\t\t\tcase 16: /* shift */ this.movementSpeedMultiplier = 1; break;\n\n\t\t\tcase 87: /*W*/ this.moveState.forward = 0; break;\n\t\t\tcase 83: /*S*/ this.moveState.back = 0; break;\n\n\t\t\tcase 65: /*A*/ this.moveState.left = 0; break;\n\t\t\tcase 68: /*D*/ this.moveState.right = 0; break;\n\n\t\t\tcase 82: /*R*/ this.moveState.up = 0; break;\n\t\t\tcase 70: /*F*/ this.moveState.down = 0; break;\n\n\t\t\tcase 38: /*up*/ this.moveState.pitchUp = 0; break;\n\t\t\tcase 40: /*down*/ this.moveState.pitchDown = 0; break;\n\n\t\t\tcase 37: /*left*/ this.moveState.yawLeft = 0; break;\n\t\t\tcase 39: /*right*/ this.moveState.yawRight = 0; break;\n\n\t\t\tcase 81: /*Q*/ this.moveState.rollLeft = 0; break;\n\t\t\tcase 69: /*E*/ this.moveState.rollRight = 0; break;\n\n\t\t}\n\n\t\tthis.updateMovementVector();\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.mousedown = function( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus ++;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 1; break;\n\t\t\t\tcase 2: this.moveState.back = 1; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t};\n\n\tthis.mousemove = function( event ) {\n\n\t\tif ( !this.dragToLook || this.mouseStatus > 0 ) {\n\n\t\t\tvar container = this.getContainerDimensions();\n\t\t\tvar halfWidth  = container.size[ 0 ] / 2;\n\t\t\tvar halfHeight = container.size[ 1 ] / 2;\n\n\t\t\tthis.moveState.yawLeft   = - ( ( event.pageX - container.offset[ 0 ] ) - halfWidth  ) / halfWidth;\n\t\t\tthis.moveState.pitchDown =   ( ( event.pageY - container.offset[ 1 ] ) - halfHeight ) / halfHeight;\n\n\t\t\tthis.updateRotationVector();\n\n\t\t}\n\n\t};\n\n\tthis.mouseup = function( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.dragToLook ) {\n\n\t\t\tthis.mouseStatus --;\n\n\t\t\tthis.moveState.yawLeft = this.moveState.pitchDown = 0;\n\n\t\t} else {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveState.forward = 0; break;\n\t\t\t\tcase 2: this.moveState.back = 0; break;\n\n\t\t\t}\n\n\t\t\tthis.updateMovementVector();\n\n\t\t}\n\n\t\tthis.updateRotationVector();\n\n\t};\n\n\tthis.update = function( delta ) {\n\n\t\tvar moveMult = delta * this.movementSpeed;\n\t\tvar rotMult = delta * this.rollSpeed;\n\n\t\tthis.object.translateX( this.moveVector.x * moveMult );\n\t\tthis.object.translateY( this.moveVector.y * moveMult );\n\t\tthis.object.translateZ( this.moveVector.z * moveMult );\n\n\t\tthis.tmpQuaternion.set( this.rotationVector.x * rotMult, this.rotationVector.y * rotMult, \n\t\t\tthis.rotationVector.z * rotMult, 1 ).normalize();\n\t\tthis.object.quaternion.multiply( this.tmpQuaternion );\n\n\t\t// expose the rotation vector for convenience\n\t\tthis.object.rotation.setFromQuaternion( this.object.quaternion, this.object.rotation.order );\n\n\n\t};\n\n\tthis.updateMovementVector = function() {\n\n\t\tvar forward = ( this.moveState.forward || ( this.autoForward && !this.moveState.back ) ) ? 1 : 0;\n\n\t\tthis.moveVector.x = ( -this.moveState.left    + this.moveState.right );\n\t\tthis.moveVector.y = ( -this.moveState.down    + this.moveState.up );\n\t\tthis.moveVector.z = ( -forward + this.moveState.back );\n\n\t\t//console.log( \"move:\", [ this.moveVector.x, this.moveVector.y, this.moveVector.z ] );\n\n\t};\n\n\tthis.updateRotationVector = function() {\n\n\t\tthis.rotationVector.x = ( -this.moveState.pitchDown + this.moveState.pitchUp );\n\t\tthis.rotationVector.y = ( -this.moveState.yawRight  + this.moveState.yawLeft );\n\t\tthis.rotationVector.z = ( -this.moveState.rollRight + this.moveState.rollLeft );\n\n\t\t//console.log( \"rotate:\", [ this.rotationVector.x, this.rotationVector.y, this.rotationVector.z ] );\n\n\t};\n\n\tthis.getContainerDimensions = function() {\n\n\t\tif ( this.domElement != document ) {\n\n\t\t\treturn {\n\t\t\t\tsize\t: [ this.domElement.offsetWidth, this.domElement.offsetHeight ],\n\t\t\t\toffset\t: [ this.domElement.offsetLeft,  this.domElement.offsetTop ]\n\t\t\t};\n\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tsize\t: [ window.innerWidth, window.innerHeight ],\n\t\t\t\toffset\t: [ 0, 0 ]\n\t\t\t};\n\n\t\t}\n\n\t};\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t};\n\n\tthis.domElement.addEventListener( \"contextmenu\", function ( event ) { event.preventDefault(); }, false );\n\n\tthis.domElement.addEventListener( \"mousemove\", bind( this, this.mousemove ), false );\n\tthis.domElement.addEventListener( \"mousedown\", bind( this, this.mousedown ), false );\n\tthis.domElement.addEventListener( \"mouseup\",   bind( this, this.mouseup ), false );\n\n\tthis.domElement.addEventListener( \"keydown\", bind( this, this.keydown ), false );\n\tthis.domElement.addEventListener( \"keyup\",   bind( this, this.keyup ), false );\n\n\tthis.updateMovementVector();\n\tthis.updateRotationVector();\n\n};\n\nexport {__FlyControls as FlyControls};\n","import { getSceneManager } from \"./SceneManager\";\nimport ModelFactory from \"./ModelFactory\";\n\nfunction PreLoadModels ({ hawks, hares, cedars, bushes }) {\n  const SceneManager = getSceneManager();\n  for (let i = 0; i < cedars; i++) {\n    SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"tree\" }));\n  }\n  for (let i = 0; i < bushes; i++) {\n    SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"bush\" }));\n  }\n  for (let i = 0; i < hawks; i++) {\n    SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"hawk\" }));\n  }\n  for (let i = 0; i < hares; i++) {\n    SceneManager.addObject(ModelFactory.makeSceneObject({ type: \"hare\" }));\n  }\n\n  function update () {}\n\n  return {\n    update\n  };\n}\n\nexport default PreLoadModels;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Popover from \"@material-ui/core/Popover\";\n\nconst hare = <div>\n    <strong>Snowshoe hare:</strong> <br/>\n    <strong>Description: </strong>\n    Unlike most snowshoe hares,\n    the fur of those that inhabit the coast of Washington<br/>\n    and Oregon do not change white in the winter.\n    Snowshoe hares can be identified by their <br/>large hind feet and the black ear tips.\n\n    </div>;\nconst tree = <div>\n    <strong>Western Red Cedar:</strong> <br/>\n    <strong>Description: </strong>\n    The Western Red Cedar is very commonly found in the wild in the northwestern United States and Canada.\n\n    </div>;\n\nconst hawk =  <div>\n    <strong>Red tailed hawk:</strong> <br/>\n    <strong>Description: </strong>\n    Red-tailed Hawks are large, sharp-taloned birds <br/>\n    that can be aggressive when defending nests or territories.<br/>\n    They frequently chase off other hawks, eagles, and Great Horned Owls.\n\n    </div>;\n\nconst bush = <div>\n    <strong>Big SageBrush:</strong> <br/>\n    <strong>Description: </strong>\n    Big sagebrush and its subspecies, are tall, rounded, U.S. native shrubs<br/>\n    with short branched, woody trunks.\n    The height is normally about 4 feet, but varies from 2 feet <br/>\n    in arid conditions to as high as 15 feet on favorable sites.\n\n</div>;\nconst grass = <div>\n    <strong>Bluebunch Wheatgrass:</strong> <br/>\n    <strong>Description: </strong>\n    Bluebunch Wheatgrass is a perennial bunchgrass common to the northern Great Plains<br/> and the\n    Intermountain regions of the western United States.\n\n    </div>;\n\n\nconst styles = theme => ({\n    typography: {\n        margin: theme.spacing.unit * 2,\n    },\n});\n\nclass PopUpInfo extends React.Component {\n    state = {\n        anchorEl: null,\n        displayInfo: \"default\",\n    };\n\n    handleClick = event => {\n        this.setState({\n            anchorEl: event.currentTarget,\n        });\n    };\n\n    handleClose = () => {\n        //console.log(\"Value of anchorEL\" + this.state.anchorEl);\n        this.setState({\n            anchorEl: null,\n        });\n    };\n\n    popUpInfo(name,event){\n       if(name == \"hare\") {\n           this.setState({\n               info: hare,\n               anchorEl: event.currentTarget,\n           });\n       }else   if(name == \"redtailHawk\") {\n           this.setState({\n               info: hawk,\n               anchorEl: event.currentTarget,\n           });\n       }else   if(name == \"bush\") {\n           this.setState({\n               info: bush,\n               anchorEl: event.currentTarget,\n           });\n       }else   if(name == \"grass\" || name == \"LowPolyGrass\") {\n           this.setState({\n               info: grass,\n               anchorEl: event.currentTarget,\n           });\n       }else   if(name == \"tree\") {\n           this.setState({\n               info: tree,\n               anchorEl: event.currentTarget,\n           });\n       }\n    }\n\n    render() {\n        const { classes } = this.props;\n        const { anchorEl } = this.state;\n        const {info} = this.state;\n        const open = Boolean(anchorEl);\n\n        return (\n            <div>\n\n                <Popover\n                    id=\"simple-popper\"\n                    open={open}\n                    //anchorEl={anchorEl}\n                    onClose={this.handleClose}\n                    anchorOrigin={{\n                        vertical: \"center\",\n                        horizontal: \"center\",\n                    }}\n                    transformOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"center\",\n                    }}\n                >\n                    {info}\n                </Popover>\n            </div>\n        );\n    }\n}\n\nPopUpInfo.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport const getPopUpInfo = () => {\n    return PopUpInfo.instance || null;\n};\n\nexport default function (container) {\n    if (!PopUpInfo.instance) {\n        PopUpInfo.instance = new PopUpInfo(container);\n    }\n    return PopUpInfo.instance;\n}\n","import * as THREE from \"three\";\nimport { OrbitControls } from \"../js/three/OrbitControls\";\nimport Ground from \"./Ground\";\nimport GrassField from \"./GrassField\";\nimport AmbientLight from \"./AmbientLight\";\nimport DirectionalLight from \"./DirectionalLight\";\nimport { getValue } from \"../utils/helpers\";\nimport Hawk, { getHawk, NAME as hawkName, TYPE as hawkType } from \"./Hawk\";\nimport Bush, { NAME as bushName, TYPE as bushType } from \"./Bush\";\nimport Tree, { NAME as treeName, TYPE as treeType } from \"./Tree\";\nimport Hare, { NAME as hareName, TYPE as hareType } from \"./Hare\";\nimport { getCapiInstance } from \"../utils/CAPI/capi\";\nimport { FlyControls } from \"../js/three/FlyControls\";\nimport PreLoadModels from \"./PreLoadModels\";\nimport SpotLight from \"./SpotLight\";\nimport { getPopUpInfo } from \"../components/PopUpInfo\";\nimport { addListenerFor } from \"../utils/CAPI/listeners\";\nimport ModelFactory from \"./ModelFactory\";\n\nconst modelMap = {\n  [hawkType]: Hawk,\n  [hareType]: Hare,\n  [bushType]: Bush,\n  [treeType]: Tree\n};\n\nclass SceneManager {\n  groundSize = {\n    x: 1000,\n    y: 1000\n  }\n  camera = null\n  scene = null\n  renderer = null\n  cameraControls = null\n  loaded = false\n  raycaster = new THREE.Raycaster()\n  mouse = new THREE.Vector2()\n  clock = new THREE.Clock()\n  screenDimensions = {}\n  subjects = []\n  selected = []\n  intersected = null\n  defaultCameraPosition = [0, 40, 400]\n  loadingScreen = null\n\n  constructor (canvas) {\n    this.setCanvas(canvas);\n    this.initializeLoadingScreen();\n    this.initializeScene();\n    this.initializeRenderer();\n    this.initializeCamera();\n\n    this.createSceneSubjects();\n  }\n\n  initializeLoadingScreen () {\n    const { width, height } = this.screenDimensions;\n    const aspectRatio = width / height;\n\n    this.loadingScreen = {\n      scene: new THREE.Scene(),\n      camera: new THREE.PerspectiveCamera(75, aspectRatio, 0.1, 1000),\n      indicator: new THREE.Mesh(\n        new THREE.CircleGeometry(1, 32),\n        new THREE.MeshBasicMaterial({\n          color: \"#3f51b5\",\n          side: THREE.DoubleSide\n        })\n      )\n    };\n    this.loadingScreen.scene.background = new THREE.Color(\"#FFFFFF\");\n    this.loadingScreen.indicator.position.set(0, 0, 5);\n    this.loadingScreen.camera.lookAt(this.loadingScreen.indicator.position);\n    this.loadingScreen.scene.add(this.loadingScreen.indicator);\n  }\n\n  setCanvas (canvas) {\n    const { width, height } = canvas;\n    this.canvas = canvas;\n    this.screenDimensions = { width, height };\n  }\n\n  onLoad = () => {\n    this.loaded = true;\n  }\n\n  resetCamera () {\n    this.cameraControls.reset();\n  }\n\n  toggleSelected (model) {\n    const modelIndex = this.selected.findIndex(\n      selectedModel => model === selectedModel\n    );\n\n    if (modelIndex >= 0) {\n      const modelToRemove = this.selected[modelIndex];\n      const originalColor = getValue(\"userData.color.original\", modelToRemove);\n\n      const color = getValue(\"material.color\", modelToRemove);\n      color.set && color.set(originalColor);\n      if (getValue(\"userData.name\") === hawkName) {\n        const capi = getCapiInstance();\n        const currentHawkCount = capi.getValue({ key: \"redtailHawkSelected\" });\n        capi.setValue({\n          key: \"redtailHawkSelected\",\n          value: currentHawkCount - 1\n        });\n      }\n      this.selected.splice(modelIndex, 1);\n    } else {\n      const color = getValue(\"material.color\", model);\n      const selectedColor = getValue(\"userData.color.selected\", model);\n      const name = getValue(\"userData.name\", model);\n      color.set && color.set(selectedColor);\n      if (name === hawkName) {\n        const capi = getCapiInstance();\n        const currentHawkCount = capi.getValue({ key: \"redtailHawkSelected\" });\n        capi.setValue({\n          key: \"redtailHawkSelected\",\n          value: currentHawkCount + 1\n        });\n      }\n      this.selected.push(model);\n    }\n  }\n\n  update () {\n    const delta = this.clock.getDelta();\n    const elapsedTime = this.clock.getElapsedTime();\n    for (let i = 0; i < this.subjects.length; i++) {\n      this.subjects[i].update && this.subjects[i].update(elapsedTime);\n    }\n\n    this.cameraControls.update(delta);\n    if (!this.loaded) {\n      this.renderer.render(this.loadingScreen.scene, this.loadingScreen.camera);\n      return;\n    }\n    this.renderer.render(this.scene, this.camera);\n    this.checkIntersects();\n  }\n\n  checkIntersects = () => {\n    const intersects =\n      this.raycaster.intersectObjects(this.scene.children, true) || [];\n\n    if (intersects.length > 0) {\n      if (this.intersected !== intersects[0].object) {\n        this.resetIntersectedColor(this.intersected);\n        this.intersected = getValue(\"object\", intersects[0]);\n        const selectable = getValue(\"userData.selectable\", this.intersected);\n        if (selectable) {\n          const highlight = getValue(\n            \"userData.color.highlight\",\n            this.intersected\n          );\n          const color = getValue(\"material.color\", this.intersected);\n          color.set && color.set(highlight);\n        }\n      }\n    } else {\n      // console.log(\"called else\");\n      this.resetIntersectedColor(this.intersected);\n      this.intersected = null;\n    }\n    // look for tree\n    // const intersects2 =\n    //    this.raycaster.intersectObject(this.scene.tree, true);\n    /*\n    if (intersects2.length > 0) {\n      if (this.intersected !== intersects2[0].object) {\n        this.resetIntersectedColor(this.intersected);\n        this.intersected = getValue(\"object\", intersects2[0]);\n\n        const selectable = getValue(\"userData.selectable\", this.intersected);\n        if (selectable) {\n          console.log(\"tree is selected \" + selectable + \"intersected \" + this.intersected);\n          const highlight = getValue(\n              \"userData.color.highlight\",\n              this.intersected\n          );\n          const color = getValue(\"material.color\", this.intersected);\n          color.set && color.set(highlight);\n        }\n      }\n    } else {\n      console.log(\"called else\");\n      this.resetIntersectedColor(this.intersected);\n      this.intersected = null;\n    }\n    */\n  }\n\n  resetIntersectedColor (intersected) {\n    const selectableKey = \"userData.selectable\";\n    if (intersected && getValue(selectableKey, intersected)) {\n      const color = getValue(\"material.color\", intersected);\n      const isSelected =\n        this.selected.findIndex(model => model === intersected) >= 0;\n\n      if (color.set) {\n        const colorKey = `userData.color.${\n          isSelected ? \"selected\" : \"original\"\n        }`;\n        color.set(getValue(colorKey, intersected));\n      }\n    }\n  }\n\n  async createSceneSubjects () {\n    const grassField = await ModelFactory.makeSceneObject({\n      type: \"grassField\",\n      config: { onLoad: this.onLoad }\n    });\n\n    this.subjects = [\n      ModelFactory.makeSceneObject({ type: \"ambientLight\" }),\n      ModelFactory.makeSceneObject({ type: \"directionalLight\" }),\n      ModelFactory.makeSceneObject({ type: \"spotLight\" }),\n      ModelFactory.makeSceneObject({\n        type: \"ground\",\n        config: { size: this.groundSize, color: \"#996600\" }\n      }),\n      grassField\n    ];\n\n    this.subjects.forEach(subject => {\n      this.scene.add(subject.model);\n    });\n  }\n\n  addObject (sceneObject) {\n    this.subjects.push(sceneObject);\n    this.scene.add(sceneObject.model);\n  }\n\n  removeObject (idx, sceneObject) {\n    this.subjects.splice(idx, 1);\n    this.scene.remove(sceneObject);\n  }\n\n  removeMostRecentModelByType ({ type }) {\n    const lastCreated = this.subjects\n      .filter(subject => {\n        if (subject.model) {\n          return subject.model.type === type;\n        }\n        return false;\n      })\n      .map(subject => subject.created)\n      .reduce((a, b) => Math.max(a, b))\n      .valueOf();\n\n    const mostRecentModel = this.subjects.find(subject => {\n      if (subject.created) {\n        return subject.created.valueOf() === lastCreated;\n      }\n      return false;\n    });\n    this.scene.remove(mostRecentModel);\n  }\n\n  removeAllModelsByType (type) {\n    const modelsToRemove = this.subjects\n      .filter(subject => {\n        if (subject.model) {\n          return subject.model.type === type;\n        }\n        return false;\n      })\n      .map(({ model }) => model);\n\n    this.subjects = this.subjects.filter(subject => {\n      if (subject.model) {\n        return subject.model.type !== type;\n      }\n      return true;\n    });\n    modelsToRemove.forEach(model => this.scene.remove(model));\n  }\n\n  onTransporterReady () {\n    const capi = getCapiInstance();\n    console.log(\"test\");\n    const [hawks, hares, cedars, bushes] = capi.getValues({\n      keys: [\n        \"redtailHawkCount\",\n        \"snowshoeHareCount\",\n        \"westernCedarCount\",\n        \"sageBushCount\"\n      ]\n    });\n    capi.addListenerFor({\n      key: \"redtailHawkCount\",\n      callback: this.handleModelCountChange({\n        type: \"Hawk\",\n        key: \"redtailHawkCount\"\n      })\n    });\n\n    capi.addListenerFor({\n      key: \"snowshoeHareCount\",\n      callback: this.handleModelCountChange({\n        type: \"Hare\",\n        key: \"snowshoeHareCount\"\n      })\n    });\n\n    capi.addListenerFor({\n      key: \"westernCedarCount\",\n      callback: this.handleModelCountChange({\n        type: \"Tree\",\n        key: \"westernCedarCount\"\n      })\n    });\n\n    capi.addListenerFor({\n      key: \"sageBushCount\",\n      callback: this.handleModelCountChange({\n        type: \"Bush\",\n        key: \"sageBushCount\"\n      })\n    });\n\n    new PreLoadModels({ hawks, hares, cedars, bushes });\n  }\n\n  addObjects ({ type, count }) {\n    for (let i = 0; i < count; i++) {\n      const model = ModelFactory.makeSceneObject({ type });\n      this.addObject(model);\n    }\n  }\n\n  handleModelCountChange = ({ type, key }) => capiModel => {\n    this.removeAllModelsByType({ type });\n    const count = capiModel.get(key);\n    this.addObjects({ type, count });\n  }\n\n  onWindowResize () {\n    const { width, height } = this.canvas;\n\n    this.screenDimensions.width = width;\n    this.screenDimensions.height = height;\n\n    this.renderer.setSize(width, height);\n\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(width, height);\n  }\n\n  handleClick = event => {\n    const vector = this.convertClickToVector(event);\n    this.raycaster.set(this.camera.position, vector);\n    const intersects =\n      this.raycaster.intersectObjects(this.scene.children, true) || [];\n\n    const model = intersects[0] || {};\n    const isSelectable = !!getValue(\"object.userData.selectable\", model);\n    if (intersects.length > 1 && model.object.name !== \"LowPolyGrass\") {\n      getPopUpInfo().popUpInfo(\"tree\", event);\n    }\n    if (isSelectable) {\n      this.toggleSelected(model.object);\n      const popUpInfo = getPopUpInfo();\n      popUpInfo.popUpInfo(model.object.name, event);\n    }\n  }\n\n  convertClickToVector = event => {\n    const vector = new THREE.Vector3();\n    const canvasTopOffset = this.canvas.getBoundingClientRect().top;\n    vector.x = (event.clientX / this.canvas.width) * 2 - 1;\n    vector.y = (-(event.clientY - canvasTopOffset) / this.canvas.height) * 2 + 1;\n\n    vector.unproject(this.camera);\n    vector.sub(this.camera.position);\n    vector.normalize();\n    return vector;\n  }\n\n  onDocumentMouseClick = event => {\n    this.handleClick(event);\n  }\n\n  onDocumentMouseMove = event => {\n    const vector = this.convertClickToVector(event);\n    this.raycaster.set(this.camera.position, vector);\n  }\n\n  initializeCamera () {\n    const { width, height } = this.screenDimensions;\n    const fieldOfView = 60;\n    const aspectRatio = width / height;\n    const nearPlane = 1;\n    const farPlane = 4000;\n\n    this.camera = new THREE.PerspectiveCamera(\n      fieldOfView,\n      aspectRatio,\n      nearPlane,\n      farPlane\n    );\n\n    this.camera.position.set(...this.defaultCameraPosition);\n\n    this.cameraControls = new OrbitControls(this.camera);\n  }\n\n  setFlyControlCamera () {\n    this.camera.position.x = 100;\n    this.camera.position.y = 100;\n    this.camera.position.z = 300;\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n    this.cameraControls = new FlyControls(this.camera);\n\n    this.cameraControls.movementSpeed = 25;\n    this.cameraControls.domElement = document.querySelector(\"#root\");\n    this.cameraControls.maxPolarAngle = Math.PI * 0.5;\n    this.cameraControls.rollSpeed = Math.PI / 24;\n    this.cameraControls.autoForward = true;\n    this.cameraControls.dragToLook = true;\n  }\n\n  setCameraPosition (x, y, z) {\n    this.cameraControls = new OrbitControls(this.camera);\n\n    this.camera.position.x = x;\n    this.camera.position.y = y;\n    this.camera.position.z = z;\n  }\n\n  setDefaultCamera () {\n    this.camera.position.set(...this.defaultCameraPosition);\n  }\n\n  initializeScene () {\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color(\"#ffffff\");\n  }\n\n  initializeRenderer () {\n    const { width, height } = this.screenDimensions;\n    this.renderer = new THREE.WebGLRenderer({\n      canvas: this.canvas,\n      antialias: true\n    });\n    this.renderer.setPixelRatio(1);\n    this.renderer.setSize(width, height);\n  }\n}\n\nexport const getSceneManager = () => {\n  return SceneManager.instance || null;\n};\n\nexport default function (container) {\n  if (!SceneManager.instance) {\n    SceneManager.instance = new SceneManager(container);\n  }\n  return SceneManager.instance;\n}\n","import SceneManager from \"./SceneManager\";\n\nfunction createCanvas (document, containerElement) {\n  const canvas = document.createElement(\"canvas\");\n  containerElement.prepend(canvas);\n  return canvas;\n}\n\nclass ThreeEntry {\n  constructor (container) {\n    this.canvas = createCanvas(document, container);\n    this.sceneManager = SceneManager(this.canvas);\n    this.bindEventListeners();\n    this.render();\n  }\n\n  bindEventListeners = () => {\n    window.onresize = this.resizeCanvas;\n    document.addEventListener(\n      \"mousemove\",\n      this.sceneManager.onDocumentMouseMove,\n      true\n    );\n    document.addEventListener(\n      \"click\",\n      this.sceneManager.onDocumentMouseClick,\n      false\n    );\n    this.resizeCanvas();\n  }\n\n  resizeCanvas = () => {\n    this.canvas.style.width = \"100%\";\n    this.canvas.style.height = \"100%\";\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n    this.sceneManager.onWindowResize();\n  }\n\n  render = () => {\n    requestAnimationFrame(this.render);\n    this.sceneManager.update();\n  }\n}\n\nexport default ThreeEntry;\n","import { getSceneManager } from \"./SceneManager\";\n// import Hawk from \"./Hawk\";\n// import Tree from \"./Tree\";\n// import Hare from \"./Hare\";\n// import Bush from \"./Bush\";\n// import { stringify } from \"querystring\";\n\nfunction RemoveModels (model) {\n  this.state = {\n    model1: model\n  };\n  let color = null;\n  const SceneManager = getSceneManager();\n  const { model1 } = this.state;\n\n  for (var i = SceneManager.subjects.length - 1; i >= 0; i--) {\n    var removeIt = false;\n    switch (String(model1).trim()) {\n      case \"tree\":\n        if (SceneManager.removeAllModelsByType(\"Tree\")) {\n          removeIt = true;\n        }\n        break;\n      case \"hawk\":\n        if (SceneManager.removeAllModelsByType(\"Hawk\")) {\n          removeIt = true;\n        }\n        break;\n      case \"bush\":\n        if (SceneManager.removeAllModelsByType(\"Bush\")) {\n          removeIt = true;\n        }\n        break;\n      case \"hare\":\n        if (SceneManager.removeAllModelsByType(\"Hare\")) {\n          removeIt = true;\n        }\n        break;\n      case \"grass\":\n        if (SceneManager.removeAllModelsByType(\"Grass\")) {\n          removeIt = true;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  function update () {}\n\n  return {\n    update\n  };\n}\n\nexport default RemoveModels;\n","import React from \"react\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport styled from \"styled-components\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { styles as SimViewer } from \"@material-ui/core/es/Button/Button\";\nimport AddModels from \"../../scenes/AddModels\";\nimport RemoveModels from \"../../scenes/RemoveModels\";\n\nconst Container = styled.div`\n  position: absolute;\n  left: 45%;\n  top: 90%;\n  display: flex;\n  grid-template-columns: auto, auto, auto;\n  justify-content: center;\n`;\n\nconst DivMargin = styled.div`\n  margin: 5px;\n`;\n\nclass AddMenu extends React.Component {\n  constructor (props) {\n    super(props);\n  }\n  state = {\n    anchorEl: null,\n    doingRemove: false\n  }\n\n  componentDidMount () {}\n\n  handleClick = event => {\n    // console.log(\"handleClick  clicked for \" + event.nativeEvent.target.outerText);\n    this.setState({ anchorEl: event.currentTarget });\n    this.setState({ doingRemove: false });\n  }\n\n  handleClickRemove = event => {\n    // console.log(\"handleClickRemove clicked for \" + event.nativeEvent.target.outerText);\n    this.setState({ anchorEl: event.currentTarget });\n    this.setState({ doingRemove: true });\n  }\n\n  handleClose = add => ev => {\n    if (!this.state.doingRemove) {\n      // console.log(\"Doing Add for \" + ev.nativeEvent.target.outerText);\n      // const model = ev.nativeEvent.target.outerText;\n      // var str = model;\n      // onDayChange = (date) => (event) => { ...your code }\n\n      // console.log(\"Doing Add:  str: '\" + str + \"'\");\n      new AddModels(add);\n    } else {\n      // console.log(\"Doing Remove: for \" + ev.nativeEvent.target.outerText);\n      // const model = ev.nativeEvent.target.outerText;\n      // var str = model;\n\n      // console.log(\"Doing Remove:  str: '\" + str + \"'\");\n      // str = str.slice(0, -1); // \"12345.0\"\n      // console.log(\"Doing Remove:  str: '\" + str + \"'\");\n      new RemoveModels(add);\n    }\n    this.setState({ anchorEl: null });\n  }\n\n  render () {\n    const tree = \"tree\";\n    const { anchorEl } = this.state;\n    // console.log(\"AddMenu render:\");\n\n    return (\n      <div>\n        <Container>\n          <DivMargin>\n            <Fab\n              aria-owns={anchorEl ? \"simple-menu\" : undefined}\n              aria-haspopup='true'\n              onClick={this.handleClick} // in here set the \"what we doing\" flag\n              color='primary'\n              aria-label='Add'\n              className={SimViewer.fab}\n            >\n              <AddIcon />\n            </Fab>\n          </DivMargin>\n          <DivMargin>\n            <Fab\n              aria-owns={anchorEl ? \"simple-menu\" : undefined}\n              aria-haspopup='true'\n              onClick={this.handleClickRemove} // in here set the \"what we doing\" flag\n              color='secondary'\n              aria-label='Delete'\n              className={SimViewer.fab}\n            >\n              <DeleteIcon />\n            </Fab>\n          </DivMargin>\n        </Container>\n        <Menu\n          id='simple-menu'\n          anchorEl={anchorEl}\n          open={Boolean(anchorEl)}\n          onClose={this.handleClose}\n        >\n          <MenuItem onClick={this.handleClose(\"tree\")}>tree</MenuItem>\n          <MenuItem onClick={this.handleClose(\"hawk\")}>hawk</MenuItem>\n          <MenuItem onClick={this.handleClose(\"hare\")}>hare</MenuItem>\n          <MenuItem onClick={this.handleClose(\"grass\")}>grass</MenuItem>\n          <MenuItem onClick={this.handleClose(\"bush\")}>bush</MenuItem>\n        </Menu>\n      </div>\n    );\n  }\n}\n\nexport default AddMenu;\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport ThreeEntry from \"../scenes/ThreeEntry\";\nimport { getSceneManager } from \"../scenes/SceneManager\";\nimport { getCapiInstance } from \"../utils/CAPI/capi\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport AddMenu from \"./UI/AddMenu\";\n\nconst CanvasContainer = styled.div`\n  flex: 1;\n  overflow: hidden;\n`;\n\nconst styles = theme => ({\n  fab: {\n    margin: theme.spacing.unit,\n  },\n});\n\n\nclass SimViewer extends Component {\n  canvasContainer = React.createRef()\n\n  componentDidMount () {\n    this.sceneManager = new ThreeEntry(\n      this.canvasContainer.current\n    ).sceneManager;\n\n    const capi = getCapiInstance();\n    const Transporter = capi.getTransporter();\n    Transporter.addInitialSetupCompleteListener(() => {\n      getSceneManager().onTransporterReady();\n    });\n    Transporter.notifyOnReady();\n  }\n\n\n  onClick = () => {\n    this.sceneManager.resetCamera();\n  }\n\n  render () {\n    return <CanvasContainer ref={this.canvasContainer}>\n      <AddMenu/>\n\n    </CanvasContainer>\n    ;\n  }\n}\n\nSimViewer.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SimViewer);\n","import React, { Component } from \"react\";\nimport \"../css/simulation.css\";\nimport SimViewer from \"./SimViewer\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex: 1;\n`;\n\nclass StudentView extends Component {\n  render () {\n    return (\n      <Container>\n        <SimViewer />\n      </Container>\n    );\n  }\n}\n\nexport default StudentView;\n","import React, { Component } from \"react\";\n\n\nclass AuthorView extends Component {\n\n\n    render(){\n        return (\n            <div style={this.props.style}>\n                <h2>Sim State:</h2>\n                <pre> {JSON.stringify(this.props.state, undefined, 2)} </pre>\n            </div>\n        );\n    }\n\n}\n\nexport default AuthorView;","import React, { Component } from \"react\";\nimport SwipeableDrawer from \"@material-ui/core/SwipeableDrawer\";\nimport { withStyles } from \"@material-ui/core\";\nimport Subject from \"../../utils/subject\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport styled from \"styled-components\";\n\nconst DrawerContentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: flex-start;\n  padding: 64px 12px 0 12px;\n  width: 400px;\n  height: 100%;\n`;\n\nconst styles = {\n  menuButton: {\n    position: \"absolute\",\n    top: 0,\n    right: 0\n  }\n};\n\nclass Drawer extends Component {\n  state = {\n    open: false\n  }\n\n  setDrawer = ({ to: value }) => {\n    const { open } = this.state;\n    if (open !== Boolean(value)) {\n      this.setState({ open: value });\n    }\n  }\n\n  toggleDrawer = () => {\n    const { open } = this.state;\n    this.setDrawer({ to: !open });\n  }\n\n  componentDidMount () {\n    const { open } = this.state;\n    Subject.subscribe(\"toggle left\", this.toggleDrawer);\n  }\n\n  componentWillUnmount () {\n    Subject.unsubscribe(\"toggle left\", this.toggleDrawer);\n  }\n\n  render () {\n    const { classes, Content } = this.props;\n    const { open } = this.state;\n    return (\n      <SwipeableDrawer\n        open={open}\n        onClose={this.toggleDrawer}\n        onOpen={this.toggleDrawer}\n      >\n        <DrawerContentContainer>\n          <IconButton\n            className={classes.menuButton}\n            onClick={this.toggleDrawer}\n            color='inherit'\n            aria-label='Menu'\n          >\n            <CloseIcon />\n          </IconButton>\n          <Content />\n        </DrawerContentContainer>\n      </SwipeableDrawer>\n    );\n  }\n}\n\nexport default withStyles(styles)(Drawer);\n","import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\nconst Container = styled.div``;\n\nclass SelectDropdown extends Component {\n  onChange = e => {\n    const { onChange } = this.props;\n    onChange && onChange(e.target.value);\n  }\n\n  render () {\n    const { name, id, options, value, placeholder } = this.props;\n\n    return (\n      <Select\n        style={{\n          alignSelf: \"stretch\",\n          margin: \"10px 0\"\n        }}\n        value={value}\n        onChange={this.onChange}\n        inputProps={{ name, id }}\n        placeholder={placeholder}\n      >\n        {options.map((option, i) => (\n          <MenuItem key={`${i}`} value={option}>\n            {option}\n          </MenuItem>\n        ))}\n      </Select>\n    );\n  }\n}\n\nexport default SelectDropdown;\n","import \"react-dropdown/style.css\";\nimport React, { Component } from \"react\";\nimport { getCapiInstance } from \"../../utils/CAPI/capi\";\nimport Paper from \"@material-ui/core/Paper\";\nimport styled from \"styled-components\";\nimport SelectDropdown from \"../Styled/SelectDropdown\";\n\nconst Container = styled(Paper)`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n  padding: 6px;\n`;\n\nconst options = [\n  \"None\",\n  \"Snowshoe Hare\",\n  \"Big Sage Brush\",\n  \"Bluebunch Wheat Grass\",\n  \"Red Tail Hawk\",\n  \"Western Red Cedar Tree\"\n];\n\nclass BalancePopulation extends Component {\n  constructor (props) {\n    super(props);\n\n    this.simModel = getCapiInstance();\n    this.state = {\n      selected: options[0]\n    };\n  }\n\n  _onSelect = option => {\n    this.setState({ selected: option });\n\n    const placeHolderValue =\n      typeof this.state.selected === \"string\"\n        ? this.state.selected\n        : this.state.selected.label;\n\n    this.simModel.setValue({ key: \"answer\", value: placeHolderValue });\n  }\n\n  render () {\n    const { selected } = this.state;\n    const placeHolderValue = this.state.selected;\n\n    this.simModel.setValue({ key: \"answer\", value: placeHolderValue });\n\n    return (\n      <Container>\n        <h3>What would you do? </h3>\n        If there are too many snowshoe hares in wildlife refuge, what kind of\n        population would you add to balance current ecosystem?\n        <SelectDropdown\n          options={options}\n          onChange={this._onSelect}\n          value={selected}\n          placeholder=\"Select an option\"\n        />\n        <div className=\"result\">\n          You selected\n          <strong> {placeHolderValue} </strong>\n        </div>\n      </Container>\n    );\n  }\n}\n\nexport default BalancePopulation;\n","import \"react-dropdown/style.css\";\nimport React, { Component } from \"react\";\nimport { getSceneManager } from \"../scenes/SceneManager\";\nimport styled from \"styled-components\";\nimport Paper from \"@material-ui/core/Paper\";\nimport SelectDropdown from \"./Styled/SelectDropdown\";\n\nconst Container = styled(Paper)`\n  display: flex;\n  flex-direction: column;\n  margin: 12px 0;\n  padding: 6px;\n`;\n\nconst options = [\n  \"Default\",\n  \"Top\",\n  \"Bottom View\",\n  \"Fly Control View\",\n  \"First Person View\"\n];\n\nclass ViewControl extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      selected: options[0]\n    };\n  }\n\n  _onSelect = option => {\n    const SceneManager = getSceneManager();\n    const selected = option;\n\n    this.setState({ selected });\n\n    switch (selected) {\n      case \"Top\":\n        SceneManager.setCameraPosition(0, 500, 0);\n        break;\n      case \"Bottom View\":\n        SceneManager.setCameraPosition(0, 10, 100);\n        break;\n      case \"Fly Control View\":\n        SceneManager.setFlyControlCamera();\n        break;\n      case \"First Person View\":\n        break;\n      default:\n        SceneManager.setDefaultCamera();\n        break;\n    }\n  }\n\n  render () {\n    const { selected } = this.state;\n\n    return (\n      <Container>\n        <h3>Select Views </h3>\n        <SelectDropdown\n          options={options}\n          onChange={this._onSelect}\n          value={selected}\n          placeholder='Select an option'\n        />\n        <div className='result'>\n          You selected <strong>{selected}</strong>\n        </div>\n      </Container>\n    );\n  }\n}\n\nexport default ViewControl;\n","import CircularProgress from \"@material-ui/core/CircularProgress\";\nimport React, { Component } from \"react\";\nimport \"../css/simulation.css\";\nimport styled from \"styled-components\";\nconst THREE = (window.THREE = require(\"three\"));\nrequire(\"three/examples/js/loaders/GLTFLoader\");\n\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: 20px;\n  bottom: 0;\n  right: 0;\n  \n`;\n\n\nclass LoadingModels extends Component{\n    constructor(props){\n        super(props);\n        this.state ={\n            loading: false,\n            grass: null\n        };\n    }\n\n    goToSim = () => {\n        const { history } = this.props;\n        history && history.push(\"/sim\");\n        console.log(\"at got to sim\");\n    }\n\n    componentDidMount = async () => {\n\n        console.log(\"Called  did mount\");\n        const manager = new THREE.LoadingManager();\n        var isLoading = true;\n        manager.onStart = () => {\n\n            console.log(\"Start Loading\");\n\n\n        };\n        manager.onLoad = () => {\n\n            isLoading = false;\n\n\n        };\n        const loader = new THREE.GLTFLoader(manager);\n\n\n        const grasses = new THREE.Object3D();\n        const originalGrass = await new Promise((resolve, reject) => {\n            loader.load(\n                \"models/grass.gltf\",\n                grass => resolve(grass.scene || null),\n                undefined,\n                reject\n            );\n        });\n\n        console.log(\"at loading 2 \" + typeof originalGrass);\n        //getSceneManager().setGrassMode(originalGrass);\n        this.setState({\n            loading: true,\n            grass: originalGrass\n        });\n        console.log(\"at loading 2  after setSate  \" + typeof this.state.grass);\n        this.goToSim();\n\n\n    };\n\n\n    getGrass(){\n        const {grass} = this.state;\n        console.log(\"at loading 2  at get Grass called time # \" + grass);\n        if(!grass){\n            this.componentDidMount();\n\n        }\n\n        return grass;\n    }\n    componentWillUnmount() {\n        console.log(\"at loading 2 \" + typeof originalGrass);\n    }\n\n    reLoad(){\n\n\n\n\n    }\n    render(){\n        console.log(\"Called Render\");\n        const {originalGrass} = this.state;\n        const {loading} = this.state;\n\n        {\n            return (\n\n                <Container>\n                <CircularProgress disableShrink />\n\n                <div> <br/>Loading ....</div>\n                </Container>\n            );\n        }\n\n\n\n    }\n\n\n}\nexport const getLoadingModels = (container) => {\n    if (!LoadingModels.instance) {\n        LoadingModels.instance = new LoadingModels(container);\n    }\n    return LoadingModels.instance;\n};\n\nexport default function (container) {\n    if (!LoadingModels.instance) {\n        LoadingModels.instance = new LoadingModels(container);\n    }\n    return LoadingModels.instance;\n}\n","import React, { Component, Fragment } from \"react\";\nimport \"./css/App.css\";\nimport WelcomePage from \"./components/WelcomePage/WelcomePage\";\nimport UIBar from \"./components/UI/UIBar\";\nimport StudentView from \"./components/StudentView\";\nimport AuthorView from \"./components/AuthorView\";\nimport Grid from \"@material-ui/core/Grid\";\nimport styled from \"styled-components\";\nimport Drawer from \"./components/UI/Drawer\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport BalancePopulation from \"./components/BalancePopulation/BalancePopulation\";\nimport ViewControl from \"./components/ViewControl\";\nimport LoadingModels from \"./components/LoadingModels\";\nimport PreLoadModels from \"./scenes/PreLoadModels\";\nimport PopUpInfo from \"./components/PopUpInfo\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nclass App extends Component {\n  state = {\n    loggedIn: false\n  }\n\n  handleLogin = () => {\n    if (!this.state.loggedIn) {\n      this.setState({ loggedIn: true });\n    }\n  }\n\n  render () {\n    return (\n      <Router>\n        <Container className='appRoot'>\n          <Route exact path='/' component={WelcomePage} />\n          <Route\n            path='/sim'\n            component={() => (\n              <Fragment>\n                <UIBar />\n                <StudentView />\n                <PopUpInfo/>\n\n                <Drawer\n                  Content={() => (\n                    <Fragment>\n                      <Route component={BalancePopulation} />\n                      <Route component={ViewControl} />\n                    </Fragment>\n                  )}\n                />\n              </Fragment>\n            )}\n          />\n        </Container>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won\"t work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let\"s check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It\"s the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can\"t reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}